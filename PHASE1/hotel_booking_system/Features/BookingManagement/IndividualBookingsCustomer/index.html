<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LuxuryStay - Stay Details</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body class="bg-gray-50 flex flex-col min-h-screen">

  <!-- ✅ Navbar -->
  <div id="navbar"></div>

  <!-- ✅ Layout -->
  <div class="flex flex-1 max-w-7xl mx-auto w-full py-8 px-4 lg:px-8 gap-8 mt-20">

    <!-- ✅ Sidebar -->
    <aside class="w-64 bg-white shadow-lg rounded-2xl p-6 h-fit">
      <nav class="space-y-4 text-gray-700 font-medium">
        <a href="/Features/Dashboard/Customer/index.html" data-page="dashboard" class="block py-2 border-b hover:text-yellow-600">Overview</a>
        <a href="/Features/BookingManagement/MyBookings/index.html" data-page="booking" class="block py-2 border-b hover:text-yellow-600">My Bookings</a>
        <a href="/Features/UserManagement/Customer/SavedRoomsCustomer/index.html" data-page="saved" class="block py-2 border-b hover:text-yellow-600">Wishlist</a>
        <a href="/Features/IssueManagement/Customer/MyIssues/index.html" data-page="issues" class="block py-2 border-b hover:text-yellow-600">My Issues</a>
        <a href="/Features/RefundManagement/Customer/MyRefunds/index.html" data-page="refunds" class="block py-2 border-b hover:text-yellow-600">My Refunds</a>
        <a href="/Features/UserManagement/Customer/ProfileDisplayCustomer/index.html" data-page="profile" class="block py-2 border-b hover:text-yellow-600">Profile</a>
        <a href="/Features/ReportManagement/Customer/ReportSections/index.html" data-page="report" class="block py-2 border-b hover:text-yellow-600">Reports</a>
      </nav>
    </aside>
  

<main class="flex-1 space-y-12">
  
  <!-- ✅ Page Header -->
  <div class="relative rounded-2xl border-2 border-red-400 bg-[#fdfaf4] py-8 text-center shadow">
    <h2 class="text-4xl text-gray-800 font-bold">Stay Details</h2>
    <p class="text-gray-500 mt-2">Complete overview of your stay including booking, issues, and invoice</p>
  </div>

  <!-- ✅ Back Button -->
  <div class="flex justify-start">
    <button onclick="window.history.back()" 
      class="flex items-center gap-2 bg-gradient-to-r from-yellow-500 to-pink-500 text-white px-5 py-2 rounded-lg shadow hover:opacity-90">
      <span class="material-icons text-sm">arrow_back</span> Back
    </button>
  </div>

  <!-- ✅ Booking + Hotel Info -->
  <section class="grid md:grid-cols-1 gap-6">
    <div class="bg-white rounded-2xl border-2 border-yellow-400 p-6 shadow-sm">
      <h3 class="text-lg font-semibold text-yellow-700 mb-4">Booking Details</h3>
      <ul class="space-y-3 text-gray-700">
        <li><span class="font-medium">Booking ID: </span>1001</li>
        <li><span class="font-medium">Rooms:</span> 1, 2, 3, 4</li>
        <li><span class="font-medium">Guests:</span> 14 People</li>
        <li><span class="font-medium">Check-in:</span> 21 Sept 2025, 2:00 PM</li>
        <li><span class="font-medium">Check-out:</span> 25 Sept 2025, 12:00 PM</li>
      </ul>
    </div>
  </section>

  <!-- ✅ Guest Information -->
  <section class="bg-white rounded-2xl border-2 border-yellow-400 p-6 shadow-sm">
    <h3 class="text-lg font-semibold text-yellow-700 mb-4">Guest Information</h3>
    <div class="grid md:grid-cols-2 gap-6">
      <div class="p-4 rounded-xl bg-gray-50 border">
        <p class="text-sm text-gray-500">Lead Guest</p>
        <p class="text-lg font-semibold">Arjun Kumar</p>
        <p class="text-gray-600">arjun.kumar@example.com</p>
        <p class="text-gray-600">+91 99887 77665</p>
      </div>
      <div class="p-4 rounded-xl bg-gray-50 border">
        <p class="text-sm text-gray-500">Special Requests</p>
        <p class="text-lg font-semibold">Vegetarian Meals, Late Check-in, Extra Pillows</p>
      </div>
    </div>
  </section>

  <!-- ✅ Issues -->
  <section class="bg-white rounded-2xl border-2 border-pink-400 p-6 shadow-sm">
    <h3 class="text-lg font-semibold text-yellow-700 mb-4">Reported Issues</h3>
    <div class="space-y-3">
      <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
        <span>Room Service Delay</span>
        <span class="bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm">Resolved</span>
      </div>
      <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
        <span>AC Not Working</span>
        <span class="bg-yellow-100 text-yellow-700 px-3 py-1 rounded-full text-sm">Pending</span>
      </div>
      <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
        <span>Noisy Corridor</span>
        <span class="bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-sm">Reported</span>
      </div>
    </div>
  </section>

  <!-- ✅ Invoice -->
  <section class="bg-white rounded-2xl border-2 border-yellow-400 p-6 shadow-sm">
    <h3 class="text-lg font-semibold text-yellow-700 mb-4">Invoice of the Stay</h3>
    <div class="overflow-x-auto">
      <table class="w-full border border-gray-200 rounded-lg">
        <thead class="bg-yellow-100">
          <tr>
            <th class="px-4 py-2 text-left">Room</th>
            <th class="px-4 py-2 text-left">Rent</th>
            <th class="px-4 py-2 text-left">Tax</th>
            <th class="px-4 py-2 text-left">Amount</th>
          </tr>
        </thead>
        <tbody class="divide-y">
          <tr><td class="px-4 py-2">Room 1</td><td>₹5000</td><td>₹500</td><td>₹5500</td></tr>
          <tr><td class="px-4 py-2">Room 2</td><td>₹4000</td><td>₹400</td><td>₹4400</td></tr>
          <tr><td class="px-4 py-2">Room 3</td><td>₹4500</td><td>₹450</td><td>₹4950</td></tr>
          <tr><td class="px-4 py-2">Room 4</td><td>₹6000</td><td>₹600</td><td>₹6600</td></tr>
          <tr class="bg-yellow-50 font-semibold">
            <td colspan="3" class="px-4 py-2 text-right">Total</td>
            <td class="px-4 py-2">₹21,450</td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="mt-4 flex justify-end">
      <button class="bg-gradient-to-r from-yellow-500 to-pink-500 text-white px-6 py-2 rounded-lg shadow hover:opacity-90">Download Invoice</button>
    </div>
  </section>

  <!-- ✅ Payment -->
  <section class="bg-white rounded-2xl border-2 border-pink-400 p-6 shadow-sm">
    <h3 class="text-lg font-semibold text-yellow-700 mb-4">Payment Information</h3>
    <ul class="space-y-2 text-gray-700">
      <li><span class="font-medium">Payment Method:</span> Credit Card (**** 2345)</li>
      <li><span class="font-medium">Transaction ID:</span> TXN123456789</li>
      <li><span class="font-medium">Payment Date:</span> 15 Sept 2025</li>
    </ul>
  </section>

</main>



  </div>

  <!-- ✅ Footer -->
  <div id="footer"></div>

  <!-- ✅ Scripts -->
  <script>
    // Sidebar highlight
    document.querySelectorAll("aside nav a").forEach(link => {
      if (link.dataset.page === "booking") {
        link.classList.add("text-yellow-700", "font-semibold");
      }
    });
// ✅ Navbar + Footer loading
const isAdminLoggedIn = localStorage.getItem("is_admin_logged_in") === "true";
const isCustomerLoggedIn = localStorage.getItem("is_customer_logged_in") === "true";

// ✅ Navbar loader
let navbarPath = "/Features/Components/Navbars/NotCustomerNavbar/index.html"; // default

if (isAdminLoggedIn) {
  navbarPath = "/Features/Components/Navbars/AdminLandingNavbar/index.html";
} else if (isCustomerLoggedIn) {
  navbarPath = "/Features/Components/Navbars/LoggedCustomerNavbar/index.html";
}

// ✅ Navbar loader
fetch(navbarPath)
  .then(res => res.text())
  .then(data => {
    document.getElementById("navbar").innerHTML = data;

    // mobile menu toggle
    const menuBtn = document.getElementById("menuBtn");
    const mobileMenu = document.getElementById("mobileMenu");
    if (menuBtn && mobileMenu) {
      menuBtn.addEventListener("click", () => {
        mobileMenu.classList.toggle("open");
      });
    }

    // ✅ attach modal listeners AFTER navbar injected
    attachModalListeners();
  });

function attachModalListeners() {
  const modal = document.getElementById("bookingModal");
  const closeModal = document.getElementById("closeModal");
  const addRoomBtn = document.getElementById("addRoomBtn");
  const roomsContainer = document.getElementById("roomsContainer");

  if (!modal) return;

  // Open modal
  document.querySelectorAll(".bookingModal").forEach(btn => {
    btn.addEventListener("click", (e) => {
      e.preventDefault();
      modal.classList.remove("hidden");
      modal.classList.add("flex");
    });
  });

  // Close modal
  closeModal?.addEventListener("click", () => {
    modal.classList.add("hidden");
    modal.classList.remove("flex");
  });

  // Add counter listeners for Adults/Children
  function addCounterListeners(roomDiv) {
    roomDiv.querySelectorAll(".increase").forEach(btn => {
      btn.addEventListener("click", () => {
        const input = btn.parentElement.querySelector("input");
        input.value = parseInt(input.value) + 1;
      });
    });
    roomDiv.querySelectorAll(".decrease").forEach(btn => {
      btn.addEventListener("click", () => {
        const input = btn.parentElement.querySelector("input");
        if (parseInt(input.value) > parseInt(input.min)) {
          input.value = parseInt(input.value) - 1;
        }
      });
    });
  }

  // Reindex rooms after add/remove
  function reindexRooms() {
    document.querySelectorAll(".room-card").forEach((room, index) => {
      room.querySelector(".room-title").textContent = `Room ${index + 1}`;
    });
  }

  // Add new room
  addRoomBtn?.addEventListener("click", () => {
    const roomDiv = document.createElement("div");
    roomDiv.className = "room-card border p-5 rounded-xl mb-6 bg-gray-50 shadow-sm";

    roomDiv.innerHTML = `
      <div class="flex items-center justify-between mb-4">
        <h3 class="room-title font-semibold text-lg">Room</h3>
        <select class="border rounded-lg p-2 focus:ring-2 focus:ring-yellow-500">
          <option>Deluxe Room</option>
          <option>Executive Suite</option>
          <option>Presidential Suite</option>
        </select>
      </div>

      <div class="grid grid-cols-2 gap-6 mb-4">
        <div class="flex items-center justify-between">
          <label class="text-sm font-medium">Adults</label>
          <div class="flex items-center space-x-3">
            <button class="decrease w-8 h-8 rounded-full bg-gray-200">−</button>
            <input type="number" value="1" min="1" class="w-12 text-center border rounded-md p-1">
            <button class="increase w-8 h-8 rounded-full bg-yellow-500 text-white">+</button>
          </div>
        </div>
        <div class="flex items-center justify-between">
          <label class="text-sm font-medium">Children</label>
          <div class="flex items-center space-x-3">
            <button class="decrease w-8 h-8 rounded-full bg-gray-200">−</button>
            <input type="number" value="0" min="0" class="w-12 text-center border rounded-md p-1">
            <button class="increase w-8 h-8 rounded-full bg-yellow-500 text-white">+</button>
          </div>
        </div>
      </div>

      <button class="remove-room mt-2 text-sm text-red-500 hover:underline">Remove Room</button>
    `;

    roomsContainer.appendChild(roomDiv);

    addCounterListeners(roomDiv);

    roomDiv.querySelector(".remove-room").addEventListener("click", () => {
      roomDiv.remove();
      reindexRooms();
    });

    reindexRooms();
  });

  // Init first room
  addCounterListeners(document.querySelector(".room-card"));
  reindexRooms();
}



    // ✅ Footer
    fetch("/Features/Components/Footers/CustomerFooter/index.html")
      .then(res => res.text())
      .then(data => {
        document.getElementById("footer").innerHTML = data;
      })
      .catch(err => console.error("❌ Footer load failed:", err));
  </script>
</body>
</html>
