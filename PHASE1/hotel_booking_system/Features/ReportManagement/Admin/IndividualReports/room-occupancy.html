<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>My Stay History</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body class="bg-gray-50 flex flex-col min-h-screen">

  <!-- Navbar placeholder -->
  <div id="navbar"></div>

  <!-- Admin Main Sidebar (always visible) -->
  <div id="old_sidebar" class="fixed top-16 left-0 w-64 h-screen shadow-lg bg-white"></div>

  <!-- Main Content -->
  <main class="ml-64 pt-20 p-6">
    <div class="bg-white shadow rounded-xl p-6">

      <!-- Title + Actions -->
      <div class="flex items-center justify-between mb-6">
        <div class="flex items-center space-x-4">
          <!-- Back to Reports Button -->
          <button onclick="history.back()" class="flex items-center space-x-2 px-3 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors">
            <span class="material-icons">arrow_back</span>
            <span class="text-sm font-medium">Back to Reports</span>
          </button>
          
          <h1 class="text-xl font-semibold flex items-center space-x-2">
            <span>My Stay History</span>
            <span class="text-gray-500 text-sm">(From 01/01/2024 To 23/09/2025)</span>
          </h1>
        </div>

        <!-- Actions -->
        <div class="flex items-center space-x-3">
          <!-- Print -->
          <button id="printBtn" class="border px-3 py-2 rounded hover:bg-gray-100 flex items-center space-x-2">
            <span class="material-icons text-gray-600">print</span>
          </button>

          <!-- Export -->
          <div class="relative">
            <button id="exportToggle" class="border px-3 py-2 rounded hover:bg-gray-100 flex items-center space-x-2">
              <span>Export As</span>
              <span class="material-icons">expand_more</span>
            </button>
            <div id="exportMenu" class="absolute hidden bg-white border rounded shadow-lg mt-2 right-0 text-sm z-40">
              <a href="#" id="exportPDF" class="block px-4 py-2 hover:bg-gray-100">PDF</a>
              <a href="#" id="exportXLS" class="block px-4 py-2 hover:bg-gray-100">XLSX (Excel)</a>
              <a href="#" id="exportCSV" class="block px-4 py-2 hover:bg-gray-100">CSV</a>
            </div>
          </div>
        </div>
      </div>

      <!-- Filters -->
      <div class="flex items-center gap-4 mb-6">
        <div class="flex flex-col">
          <label class="text-xs font-medium text-gray-600 mb-1">Date Range</label>
          <select id="dateRange" class="border rounded px-3 py-2 text-sm min-w-[180px] h-[38px]">
            <option value="all" id="dateAll">All Dates</option>
            <option value="thisMonth" id="dateThisMonth">This Month</option>
            <option value="last3Months" id="dateLast3Months">Last 3 Months</option>
            <option value="thisYear" id="dateThisYear">This Year</option>
          </select>
        </div>
        
        <div class="flex flex-col">
          <label class="text-xs font-medium text-gray-600 mb-1">Customer</label>
          <select id="customerFilter" class="border border-gray-300 rounded px-3 py-2 text-sm min-w-[150px] h-[38px] focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white">
            <option value="all">All Customers</option>
            <!-- Options will be populated dynamically from table data -->
          </select>
        </div>
        
        <!-- Custom Button - Aligned at bottom -->
        <div class="flex flex-col">
          <div class="h-[17px]"></div> <!-- Spacer to align with other elements -->
          <button id="customBtn" class="px-4 py-2 bg-orange-500 text-white rounded hover:bg-orange-600 font-medium text-sm h-[38px]">
            Custom Dates
          </button>
        </div>
        
        <!-- Custom Date Inputs (hidden by default) - Inline with other elements -->
        <div id="customDateInputs" class="hidden flex items-end gap-2">
          <div class="flex flex-col">
            <div class="h-[17px]"></div> <!-- Spacer -->
            <input type="date" id="fromDate" class="border rounded px-3 py-2 text-sm h-[38px] focus:ring-2 focus:ring-orange-500 focus:border-orange-500" />
          </div>
          <div class="flex items-end">
            <span class="text-gray-500 text-sm mb-2">to</span>
          </div>
          <div class="flex flex-col">
            <div class="h-[17px]"></div> <!-- Spacer -->
            <input type="date" id="toDate" class="border rounded px-3 py-2 text-sm h-[38px] focus:ring-2 focus:ring-orange-500 focus:border-orange-500" />
          </div>
        </div>
        
        <div class="flex-1"></div>
        <div class="flex items-end gap-2">
          <div class="flex flex-col">
            <div class="h-[17px]"></div> <!-- Spacer -->
            <button id="clearFilterBtn" class="px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 h-[38px]">Clear Filters</button>
          </div>
          <div class="flex flex-col">
            <div class="h-[17px]"></div> <!-- Spacer -->
            <button id="applyFilterBtn" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 h-[38px]">Apply Filter</button>
          </div>
        </div>
      </div>

      <!-- Table -->
      <div class="overflow-x-auto rounded-xl border">
        <table class="w-full text-sm">
          <thead class="bg-gray-100 border-b">
            <tr>
              <th class="text-left p-3 font-medium">Booking ID</th>
              <th class="text-left p-3 font-medium">Customer</th>
              <th class="text-left p-3 font-medium">Room Type</th>
              <th class="text-left p-3 font-medium">Check-In</th>
              <th class="text-left p-3 font-medium">Check-Out</th>
              <th class="text-center p-3 font-medium">Nights</th>
              <th class="text-right p-3 font-medium">Amount Paid</th>
              <th class="text-center p-3 font-medium">Certificate</th>
            </tr>
          </thead>
          <tbody id="reportBody">
            <tr class="border-b hover:bg-gray-50" data-status="completed" data-checkin="2025-09-12" data-checkout="2025-09-14" data-customer="John Smith">
              <td class="p-3">#1234</td>
              <td class="p-3">John Smith</td>
              <td class="p-3">Deluxe Room</td>
              <td class="p-3">12 Sep 2025</td>
              <td class="p-3">14 Sep 2025</td>
              <td class="text-center p-3">2</td>
              <td class="text-right p-3">₹8,000</td>
              <td class="text-center p-3"><a href="#" class="text-blue-600 hover:underline">Download</a></td>
            </tr>
            <tr class="border-b hover:bg-gray-50" data-status="completed" data-checkin="2025-08-01" data-checkout="2025-08-05" data-customer="Sarah Johnson">
              <td class="p-3">#1235</td>
              <td class="p-3">Sarah Johnson</td>
              <td class="p-3">Suite</td>
              <td class="p-3">01 Aug 2025</td>
              <td class="p-3">05 Aug 2025</td>
              <td class="text-center p-3">4</td>
              <td class="text-right p-3">₹25,000</td>
              <td class="text-center p-3"><a href="#" class="text-blue-600 hover:underline">Download</a></td>
            </tr>
            <tr class="border-b hover:bg-gray-50" data-status="cancelled" data-checkin="2025-07-15" data-checkout="2025-07-18" data-customer="Michael Davis">
              <td class="p-3">#1236</td>
              <td class="p-3">Michael Davis</td>
              <td class="p-3">Standard Room</td>
              <td class="p-3">15 Jul 2025</td>
              <td class="p-3">18 Jul 2025</td>
              <td class="text-center p-3">3</td>
              <td class="text-right p-3">₹12,000</td>
              <td class="text-center p-3"><span class="text-gray-400">N/A</span></td>
            </tr>
            <tr class="border-b hover:bg-gray-50" data-status="completed" data-checkin="2025-06-10" data-checkout="2025-06-12" data-customer="Emily Wilson">
              <td class="p-3">#1237</td>
              <td class="p-3">Emily Wilson</td>
              <td class="p-3">Deluxe Room</td>
              <td class="p-3">10 Jun 2025</td>
              <td class="p-3">12 Jun 2025</td>
              <td class="text-center p-3">2</td>
              <td class="text-right p-3">₹8,000</td>
              <td class="text-center p-3"><a href="#" class="text-blue-600 hover:underline">Download</a></td>
            </tr>
            <tr class="border-b hover:bg-gray-50" data-status="cancelled" data-checkin="2025-05-20" data-checkout="2025-05-23" data-customer="John Smith">
              <td class="p-3">#1238</td>
              <td class="p-3">John Smith</td>
              <td class="p-3">Suite</td>
              <td class="p-3">20 May 2025</td>
              <td class="p-3">23 May 2025</td>
              <td class="text-center p-3">3</td>
              <td class="text-right p-3">₹18,750</td>
              <td class="text-center p-3"><span class="text-gray-400">N/A</span></td>
            </tr>
          </tbody>
          <tfoot class="bg-gray-50 border-t">
            <tr>
              <td colspan="5" class="p-3 font-semibold text-right">Total</td>
              <td id="totalNights" class="text-center p-3 font-semibold">14</td>
              <td id="totalAmount" class="text-right p-3 font-semibold">₹71,750</td>
              <td></td>
            </tr>
          </tfoot>
        </table>
      </div>
    </div>
  </main>


  <!-- PDF Export Modal (advanced) -->
  <div id="pdfModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
    <div class="bg-white w-11/12 md:w-11/12 lg:w-4/5 rounded-xl shadow-lg p-6 max-h-[90vh] overflow-y-auto">
      <div class="flex items-start justify-between">
        <h2 class="text-lg font-semibold">Export Report as PDF</h2>
        <button id="pdfClose" class="text-gray-500 hover:text-gray-800">✕</button>
      </div>

      <p class="text-sm text-gray-600 mt-3">You can protect the exported report with a password to keep your data secure.</p>

      <label class="flex items-center space-x-2 mt-4">
        <input id="pdfProtect" type="checkbox" class="w-4 h-4">
        <span class="text-sm">I want to protect this file with a password.</span>
      </label>

      <button id="pdfCustomizeToggle" class="text-sm text-blue-600 mt-2 inline-flex items-center">
        Customize the details in the export file
        <span class="material-icons text-sm ml-1">expand_more</span>
      </button>

      <!-- Choose Details (collapsible) -->
      <div id="pdfDetails" class="mt-3">
        <h3 class="font-medium mb-2">Choose Details to Display</h3>
        <div class="grid grid-cols-3 gap-3 text-sm mb-4">
          <label class="flex items-center space-x-2"><input type="checkbox" checked> <span>Organization Name</span></label>
          <label class="flex items-center space-x-2"><input type="checkbox" id="pdfPageNum"> <span>Page Number</span></label>
          <label class="flex items-center space-x-2"><input type="checkbox"> <span>Generated By</span></label>
          <label class="flex items-center space-x-2"><input type="checkbox"> <span>Generated Date</span></label>
          <label class="flex items-center space-x-2"><input type="checkbox"> <span>Generated Time</span></label>
        </div>

        <h3 class="font-medium mb-2">Temporary Note</h3>
        <textarea id="pdfNote" rows="3" class="w-full border rounded-lg p-2 text-sm mb-4" placeholder="Enter any notes..."></textarea>

        <h3 class="font-medium mb-2">Report Layout</h3>
        <div class="grid grid-cols-2 gap-4 text-sm mb-4">
          <div>
            <label class="block text-xs text-gray-600">Table Density</label>
            <select id="pdfDensity" class="w-full border rounded-lg p-2">
              <option>Classic</option>
              <option>Compact</option>
            </select>
          </div>
          <div>
            <label class="block text-xs text-gray-600">Table Design</label>
            <select id="pdfDesign" class="w-full border rounded-lg p-2">
              <option>Default</option>
              <option>Minimal</option>
              <option>Striped</option>
            </select>
          </div>
        </div>

        <label class="flex items-center space-x-2 mb-4 text-sm">
          <input id="pdfAutoResize" type="checkbox"> 
          <span>Re-size the table and its font automatically to fit the content within the table.</span>
        </label>

        <div class="grid grid-cols-2 gap-4 text-sm mb-4">
          <div>
            <label class="block text-xs text-gray-600">Paper Size</label>
            <select id="pdfPaper" class="w-full border rounded-lg p-2">
              <option>A4</option>
              <option>Letter</option>
            </select>
          </div>
          <div>
            <label class="block text-xs text-gray-600">Orientation</label>
            <div class="flex space-x-4 mt-1">
              <label class="flex items-center space-x-2"><input type="radio" name="pdfOrient" value="portrait" checked> <span>Portrait</span></label>
              <label class="flex items-center space-x-2"><input type="radio" name="pdfOrient" value="landscape"> <span>Landscape</span></label>
            </div>
          </div>
        </div>

        <div class="grid grid-cols-2 gap-4 text-sm mb-4">
          <div>
            <label class="block text-xs text-gray-600">Font Family</label>
            <select id="pdfFont" class="w-full border rounded-lg p-2">
              <option>Ubuntu</option>
              <option>Arial</option>
              <option>Times New Roman</option>
            </select>
          </div>
          <div>
            <label class="block text-xs text-gray-600">Margins (cm)</label>
            <div class="grid grid-cols-4 gap-2 mt-1">
              <input id="mTop" type="number" step="0.1" value="0.9" class="border rounded-lg p-1 text-sm" title="Top">
              <input id="mBottom" type="number" step="0.1" value="0.7" class="border rounded-lg p-1 text-sm" title="Bottom">
              <input id="mLeft" type="number" step="0.1" value="0.9" class="border rounded-lg p-1 text-sm" title="Left">
              <input id="mRight" type="number" step="0.1" value="0.7" class="border rounded-lg p-1 text-sm" title="Right">
            </div>
          </div>
        </div>
      </div>

      <!-- Preview + Actions -->
      <div class="flex flex-col lg:flex-row lg:items-start lg:space-x-6 mt-6">
        <div class="flex-1">
          <!-- could show summary or sample lines here -->
        </div>

        <div class="w-full lg:w-[320px]">
          <div class="border rounded-lg p-3 bg-gray-50">
            <div class="text-xs text-gray-500 mb-2 text-center font-medium">PREVIEW</div>
            <div class="bg-white p-3 border rounded text-xs text-gray-500 h-60 overflow-hidden">
              <!-- Fake preview content -->
              <div class="text-center mb-2 font-semibold">Demo Org</div>
              <div class="h-2 bg-gray-100 rounded mb-2"></div>
              <div class="space-y-1 mt-3">
                <div class="h-2 bg-gray-100 rounded"></div>
                <div class="h-2 bg-gray-100 rounded"></div>
                <div class="h-2 bg-gray-100 rounded"></div>
                <div class="h-2 bg-gray-100 rounded"></div>
                <div class="h-2 bg-gray-100 rounded"></div>
              </div>
            </div>
          </div>

          <div class="flex justify-end mt-4 space-x-3">
            <button id="pdfCancel" class="px-4 py-2 bg-gray-200 rounded hover:bg-gray-300">Cancel</button>
            <button id="pdfExportBtn" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Export PDF</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- XLS/CSV Export Modal (simple) -->
  <div id="xlsModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
    <div class="bg-white w-11/12 md:w-2/3 lg:w-1/2 rounded-xl shadow-lg p-6">
      <div class="flex items-start justify-between">
        <h2 class="text-lg font-semibold">Export Report</h2>
        <button id="xlsClose" class="text-gray-500 hover:text-gray-800">✕</button>
      </div>

      <p class="text-sm text-gray-600 mt-3">You can protect the exported report with a password to keep your data secure.</p>

      <label class="flex items-center space-x-2 mt-4">
        <input id="xlsProtect" type="checkbox" class="w-4 h-4">
        <span class="text-sm">I want to protect this file with a password.</span>
      </label>

      <label class="flex items-center space-x-2 mt-3">
        <input id="xlsViewOnly" type="checkbox" class="w-4 h-4">
        <span class="text-sm">Export this report based on my current view</span>
      </label>

      <button id="xlsCustomize" class="text-sm text-blue-600 mt-3 inline-flex items-center">
        Customize the details in the export file
        <span class="material-icons text-sm ml-1">expand_more</span>
      </button>

      <div id="xlsCustomizePanel" class="mt-3 hidden text-sm">
        <label class="flex items-center space-x-2"><input type="checkbox" checked> Organization Name</label>
        <label class="flex items-center space-x-2 mt-1"><input type="checkbox"> Page Number</label>
        <!-- minimal customization options for XLSX/CSV -->
      </div>

      <div class="flex justify-end mt-6 space-x-3">
        <button id="xlsCancel" class="px-4 py-2 bg-gray-200 rounded hover:bg-gray-300">Cancel</button>
        <button id="xlsExportBtn" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Export</button>
      </div>
    </div>
  </div>

  <!-- Custom Date Modal -->
  <div id="dateModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
    <div class="bg-white w-11/12 md:w-2/3 lg:w-1/2 rounded-xl shadow-lg p-6">
      <div class="flex items-start justify-between">
        <h2 class="text-lg font-semibold">Select Custom Date Range</h2>
        <button id="dateClose" class="text-gray-500 hover:text-gray-800">✕</button>
      </div>

      <p class="text-sm text-gray-600 mt-3">Choose a start and end date for the report.</p>

      <div class="flex gap-4 mt-6">
        <div class="flex-1">
          <label class="block text-xs text-gray-600">From</label>
          <input id="customFrom" type="date" class="w-full border rounded p-2" value="2024-01-01">
        </div>
        <div class="flex-1">
          <label class="block text-xs text-gray-600">To</label>
          <input id="customTo" type="date" class="w-full border rounded p-2" value="2025-12-31">
        </div>
      </div>

      <div class="flex justify-end mt-6 space-x-3">
        <button id="dateCancel" class="px-4 py-2 bg-gray-200 rounded hover:bg-gray-300">Cancel</button>
        <button id="dateApply" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Apply</button>
      </div>
    </div>
  </div>
    <!-- // fetch("/Features/Components/Navbars/LoggedCustomerNavbar/index.html").then(r => r.text()).then(d => { document.getElementById("navbar").innerHTML = d; }).catch(()=>{}); -->
    <!-- // fetch("/Features/Components/Footers/CustomerFooter/index.html").then(r => r.text()).then(d => { document.getElementById("footer").innerHTML = d; }).catch(()=>{}); -->


<script src="./script.js"></script>
</body>
</html>
