<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LuxuryStay - Admin Main Page</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- âœ… Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-50">

  <!-- âœ… Navbar placeholder -->
  <div id="navbar"></div>

  <!-- âœ… Sidebar -->
  <div id="sidebar" class="fixed top-16 left-0 w-64 h-screen shadow-lg bg-white"></div>

  <!-- âœ… Main Content (scrollable only here) -->
  <main class="ml-64 pt-16 p-8 h-screen overflow-y-auto">
    <h2 class="text-2xl font-bold text-gray-800 mb-6">Welcome, Admin ðŸ‘‹</h2>

    <!-- âœ… Global Filter Bar -->
    <div class="bg-white shadow rounded-xl p-4 mb-8 flex flex-wrap items-center gap-4">
      <span class="text-gray-600 font-medium">Filter by:</span>
      <button class="px-4 py-2 rounded-lg bg-gray-200 hover:bg-yellow-500 hover:text-white filter-btn" data-range="1D">1D</button>
      <button class="px-4 py-2 rounded-lg bg-gray-200 hover:bg-yellow-500 hover:text-white filter-btn" data-range="1W">1W</button>
      <button class="px-4 py-2 rounded-lg bg-gray-200 hover:bg-yellow-500 hover:text-white filter-btn" data-range="1M">1M</button>
      <div class="flex items-center gap-2">
        <input type="date" id="fromDate" class="border p-2 rounded-lg">
        <span>to</span>
        <input type="date" id="toDate" class="border p-2 rounded-lg">
        <button id="applyRange" class="px-4 py-2 rounded-lg bg-yellow-500 text-white hover:bg-yellow-600">Apply</button>
      </div>
    </div>

    <!-- âœ… Filter + Quick Action -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-10">
      <!-- Filter -->
      <div class="bg-white shadow rounded-xl p-6">
        <h3 class="text-lg font-semibold text-gray-700 mb-4">Filter Stats</h3>
        <div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
          <div class="bg-gray-100 p-4 rounded-lg text-center">
            <p class="text-sm text-gray-500">Total Bookings</p>
            <p class="text-xl font-bold text-yellow-600" id="totalBookings">856</p>
          </div>
          <div class="bg-gray-100 p-4 rounded-lg text-center">
            <p class="text-sm text-gray-500">Net Revenue</p>
            <p class="text-xl font-bold text-green-600" id="netRevenue">â‚¹12.3L</p>
          </div>
          <div class="bg-gray-100 p-4 rounded-lg text-center">
            <p class="text-sm text-gray-500">Refunds Sent</p>
            <p class="text-xl font-bold text-red-600" id="refundsSent">42</p>
          </div>
          <div class="bg-gray-100 p-4 rounded-lg text-center">
            <p class="text-sm text-gray-500">Rooms Available</p>
            <p class="text-xl font-bold text-blue-600" id="roomsAvailable">78</p>
          </div>
          <div class="bg-gray-100 p-4 rounded-lg text-center">
            <p class="text-sm text-gray-500">Unresolved Issues</p>
            <p class="text-xl font-bold text-orange-600" id="unresolvedIssues">12</p>
          </div>
          <div class="bg-gray-100 p-4 rounded-lg text-center">
            <p class="text-sm text-gray-500">Pending Refunds</p>
            <p class="text-xl font-bold text-purple-600" id="pendingRefunds">7</p>
          </div>
        </div>
      </div>

      <!-- Quick Action -->
      <div class="bg-white shadow rounded-xl p-6">
        <h3 class="text-lg font-semibold text-gray-700 mb-4">Quick Actions</h3>
        <div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
          <button class="bg-yellow-500 hover:bg-yellow-600 text-white py-3 rounded-lg shadow">Add Room</button>
          <button class="bg-gray-500 hover:bg-gray-600 text-white py-3 rounded-lg shadow">Freeze Room</button>
          <button class="bg-blue-500 hover:bg-blue-600 text-white py-3 rounded-lg shadow">Edit Room</button>
          <button class="bg-red-500 hover:bg-red-600 text-white py-3 rounded-lg shadow">View Issues</button>
          <button class="bg-green-500 hover:bg-green-600 text-white py-3 rounded-lg shadow">Generate Report</button>
          <button class="bg-purple-500 hover:bg-purple-600 text-white py-3 rounded-lg shadow">Backup Data</button>
        </div>
      </div>
    </div>

    <!-- âœ… Charts -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-10">
      <!-- Daily Bookings Chart -->
      <div class="bg-white shadow rounded-xl p-6">
        <h3 class="text-lg font-semibold text-gray-700 mb-4">Daily Bookings</h3>
        <canvas id="dailyBookingsChart"></canvas>
      </div>
      
      <!-- Room Type Chart -->
      <div class="bg-white shadow rounded-xl p-6">
        <h3 class="text-lg font-semibold text-gray-700 mb-4">Bookings by Room Type</h3>
        <canvas id="roomTypeChart"></canvas>
      </div>
    </div>

    <!-- âœ… Extra Insights -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <div class="bg-white shadow rounded-xl p-6">
        <h3 class="text-lg font-semibold text-gray-700">Occupancy Rate</h3>
        <p class="text-3xl font-bold text-yellow-600 mt-2" id="occupancyRate">82%</p>
      </div>
    </div>
  </main>

  <!-- âœ… Script -->
  <script>
    // Utility: random integer
    function rand(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    // âœ… Charts
    const ctx1 = document.getElementById('dailyBookingsChart').getContext('2d');
    const ctx2 = document.getElementById('roomTypeChart').getContext('2d');

    let dailyChart = new Chart(ctx1, {
      type: 'line',
      data: { labels: [], datasets: [{ label: 'Bookings', data: [], borderColor: '#facc15', backgroundColor: '#fde04750', fill: true, tension: 0.4 }] }
    });

    let roomChart = new Chart(ctx2, {
      type: 'bar',
      data: { labels: ['Single', 'Double', 'Triple', 'Quad'], datasets: [{ label: 'Bookings', data: [], backgroundColor: ['#3b82f6', '#facc15', '#f97316', '#ef4444'] }] }
    });

    // âœ… Update dashboard data
    function updateDashboard(range) {
      // Simulate stats
      document.getElementById("totalBookings").textContent = rand(100, 2000);
      document.getElementById("netRevenue").textContent = "â‚¹" + rand(5, 50) + "L";
      document.getElementById("refundsSent").textContent = rand(10, 100);
      document.getElementById("roomsAvailable").textContent = rand(20, 120);
      document.getElementById("unresolvedIssues").textContent = rand(0, 50);
      document.getElementById("pendingRefunds").textContent = rand(0, 20);
      document.getElementById("occupancyRate").textContent = rand(50, 100) + "%";

      // Update chart labels & data
      let labels, data;
      if (range === "1D") {
        labels = Array.from({length: 24}, (_, i) => `${i}:00`);
        data = labels.map(() => rand(0, 20));
      } else if (range === "1W") {
        labels = ['Mon','Tue','Wed','Thu','Fri','Sat','Sun'];
        data = labels.map(() => rand(10, 50));
      } else if (range === "1M") {
        labels = Array.from({length: 4}, (_, i) => `Week ${i+1}`);
        data = labels.map(() => rand(50, 200));
      } else {
        labels = ['Custom1','Custom2','Custom3'];
        data = labels.map(() => rand(10, 100));
      }

      dailyChart.data.labels = labels;
      dailyChart.data.datasets[0].data = data;
      dailyChart.update();

      roomChart.data.datasets[0].data = [rand(20, 100), rand(30, 120), rand(10, 80), rand(5, 40)];
      roomChart.update();
    }

    // âœ… Filter buttons
    document.querySelectorAll(".filter-btn").forEach(btn => {
      btn.addEventListener("click", () => updateDashboard(btn.dataset.range));
    });

    document.getElementById("applyRange").addEventListener("click", () => {
      const from = document.getElementById("fromDate").value;
      const to = document.getElementById("toDate").value;
      if (from && to) updateDashboard("custom");
    });

    // Initial load
    updateDashboard("1W");

    // Load Navbar
    fetch("../AdminMainPageNavbar/index.html").then(res => res.text()).then(data => {
      document.getElementById("navbar").innerHTML = data;
    });

    // Load Sidebar
    fetch("../AdminMainPageSidebar/index.html").then(res => res.text()).then(data => {
      document.getElementById("sidebar").innerHTML = data;
      const currentPage = "dashboard";
      document.querySelectorAll("#sidebar a").forEach(link => {
        if (link.dataset.page === currentPage) {
          link.classList.add("text-yellow-600", "font-bold");
        }
      });
    });
  </script>
</body>
</html>
