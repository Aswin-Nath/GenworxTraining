<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sign up Page</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  <!-- Grey Top Bar -->
  <div class="bg-gray-500 h-10 w-full">
      <div class="text-xl px-6 py-2 mb-2 font-bold text-white inline-block">
        <a href="../LandingPage/index.html">
          <img class="h-[30px] w-[30px] pb-[5px]" src="../../assets/Hotel_logo.png">
        </a>
      </div>
  </div>

  <div class="flex justify-center items-center min-h-screen">
      <div class="bg-white w-full max-w-md rounded-md shadow-md overflow-hidden">
        <div class="mt-[30px]">
          <h2 class="text-xl font-semibold text-center">Sign up</h2>
          <form id="signupForm" class="flex flex-col space-y-3 px-6 pb-6" novalidate>
            
            <label class="text-sm font-medium">Name<span class="text-red-500">*</span></label>
            <input type="text" name="name" placeholder="Enter your name" class="w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">

            <label class="text-sm font-medium">Gender<span class="text-red-500">*</span></label>
            <select id="genderSelect" name="gender" class="w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
              <option value="">Choose your gender</option>
              <option value="Male">Male</option>
              <option value="Female">Female</option>
              <option value="Other">Other</option>
            </select>

            <input 
              type="text" 
              id="otherGenderInput" 
              name="otherGender" 
              placeholder="Please specify" 
              class="w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 hidden"
            >

            <label class="text-sm font-medium">Provide your DOB<span class="text-red-500">*</span></label>
            <input type="date" name="dob" class="w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">

            <label class="text-sm font-medium">Email<span class="text-red-500">*</span></label>
            <input type="email" name="email" placeholder="Enter your email" class="w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">

            <label class="text-sm font-medium">Phone Number<span class="text-red-500">*</span></label>
            <input type="tel" name="phone" placeholder="Enter your phone number" class="w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">

            <label class="text-sm font-medium">Password<span class="text-red-500">*</span></label>
            <input type="password" name="password" placeholder="Enter your password" class="w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">

            <button type="submit" class="w-full bg-black text-white py-2 rounded-md mt-2 hover:bg-gray-800">Create Account</button>

            <p class="text-sm text-center mt-2">Already have an account?
              <a href="../LoginPage/index.html" class="text-indigo-600 hover:underline">Login</a>
            </p>
          </form>
        </div>
      </div>
  </div>

  <script>
  const form = document.getElementById("signupForm");
  const nameInput = form.querySelector('input[name="name"]');
  const genderSelect = form.querySelector('select[name="gender"]');
  const otherGenderInput = document.getElementById("otherGenderInput");
  const dobInput = form.querySelector('input[name="dob"]');
  const emailInput = form.querySelector('input[name="email"]');
  const phoneInput = form.querySelector('input[name="phone"]');
  const passwordInput = form.querySelector('input[name="password"]');

  emailInput.disabled = true;
  phoneInput.disabled = true;
  passwordInput.disabled = true;

  genderSelect.addEventListener("change", () => {
    if (genderSelect.value === "Other") {
      otherGenderInput.classList.remove("hidden");
    } else {
      otherGenderInput.classList.add("hidden");
      otherGenderInput.value = "";
    }
    checkBasicDetails();
  });

  function checkBasicDetails() {
    const isNameFilled = nameInput.value.trim() !== "";
    const isGenderFilled = genderSelect.value !== "" && (genderSelect.value !== "Other" || otherGenderInput.value.trim() !== "");
    const isDobFilled = dobInput.value.trim() !== "";
    const canEnable = isNameFilled && isGenderFilled && isDobFilled;
    emailInput.disabled = !canEnable;
    phoneInput.disabled = !canEnable;
  }

  function updatePasswordEnable() {
    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;
    const phoneRegex = /^\\d{10}$/;
    const isEmailValid = emailRegex.test(emailInput.value.trim());
    const isPhoneValid = phoneRegex.test(phoneInput.value.replace(/\\s/g, ''));
    passwordInput.disabled = !(isEmailValid && isPhoneValid);
  }

  nameInput.addEventListener("input", checkBasicDetails);
  dobInput.addEventListener("input", checkBasicDetails);
  otherGenderInput.addEventListener("input", checkBasicDetails);
  emailInput.addEventListener("input", updatePasswordEnable);
  phoneInput.addEventListener("input", updatePasswordEnable);

  form.addEventListener("submit", (e) => {
    e.preventDefault();
    form.querySelectorAll(".error-msg").forEach(el => el.remove());
    let isValid = true;

    if (!nameInput.value.trim()) {
      isValid = false;
      showError(nameInput, "This field is required");
    }

    if (!genderSelect.value) {
      isValid = false;
      showError(genderSelect, "This field is required");
    } else if (genderSelect.value === "Other" && !otherGenderInput.value.trim()) {
      isValid = false;
      showError(otherGenderInput, "Please specify your gender");
    }

    if (!dobInput.value.trim()) {
      isValid = false;
      showError(dobInput, "This field is required");
    }

    if (!emailInput.value.trim()) {
      isValid = false;
      showError(emailInput, "This field is required");
    } else {
      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;
      if (!emailRegex.test(emailInput.value)) {
        isValid = false;
        showError(emailInput, "Enter a valid email address");
      }
    }

    if (!phoneInput.value.trim()) {
      isValid = false;
      showError(phoneInput, "This field is required");
    } else {
      const phoneRegex = /^\\d{10}$/;
      if (!phoneRegex.test(phoneInput.value.replace(/\\s/g, ''))) {
        isValid = false;
        showError(phoneInput, "Enter a valid 10-digit phone number");
      }
    }

    if (!passwordInput.value.trim()) {
      isValid = false;
      showError(passwordInput, "This field is required");
    }

    if (isValid) {
      localStorage.setItem("name", nameInput.value.trim());
      localStorage.setItem("gender", genderSelect.value);
      if (genderSelect.value === "Other") {
        localStorage.setItem("otherGender", otherGenderInput.value.trim());
      } else {
        localStorage.removeItem("otherGender");
      }
      localStorage.setItem("dob", dobInput.value);
      localStorage.setItem("email", emailInput.value.trim());
      localStorage.setItem("phone", phoneInput.value.trim());
      localStorage.setItem("password", passwordInput.value.trim());

      alert("Form submitted successfully! Data saved to localStorage.");
      form.reset();
      otherGenderInput.classList.add("hidden");
      emailInput.disabled = true;
      phoneInput.disabled = true;
      passwordInput.disabled = true;
    }
  });

  function showError(input, message) {
    const error = document.createElement("p");
    error.className = "error-msg text-red-500 text-xs mt-1";
    error.innerText = message;
    input.insertAdjacentElement("afterend", error);
  }
  </script>
</body>
</html>
